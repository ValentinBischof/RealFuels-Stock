@PART[bluedog_Agena_Avionics]:FOR[RealFuels_StockEngines]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		type = ServiceModule
		basemass = -1

		TANK
		{
			name = ElectricCharge
			amount = #$/RESOURCE[ElectricCharge]/maxAmount$
			maxAmount = #$amount$
			%utilization = 10
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[ElectricCharge]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[ElectricCharge]/maxAmount$
		@temp /= #$TANK[ElectricCharge]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[MonoPropellant] {}
}

@PART[bluedog_Agena_Engine_XLR81]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
		ignitions = 1
		ullage = True
		@atmosphereCurve
		{
			@key,0 = 0 272
			@key,1 = 1 94
		}
		@PROPELLANT[LiquidFuel]
		{
			@name = UDMH
			@ratio = 2.0961
			@DrawGauge = False
		}
		@PROPELLANT[Oxidizer]
		{
			@name = IRFNA-III
			@ratio = 0.5508
			@DrawGauge = True
		}
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.2
		engineDecelerationSpeed = 0.35
	}

	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		type = ModuleEnginesRF
		techLevel = 0
   		origTechLevel = 0
		minTechLevel = 0
		engineType = U+
		modded = false
		origMass = 0.09
		configuration = Belle-RLX81-8048
		
		CONFIG
		{
			name = Belle-RLX81-8048
			description = Early RLX81 variant, used in the Belle-A upper stage. The all-aluminum construction makes this engine a bit of a technical marvel.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			massMult = 1
			ignitions = 1
			ullage = true
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[engineSwitch] { %subtype = 8048 }
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			IspSL = 1.0000
			IspV = 1.0000
			!IGNITOR_RESOURCE,* {}
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}
		CONFIG
		{
			name = Belle-RLX81-8081
			description = Early RLX81 variant, used in the first production blocks of the Belle-B upper stage. Performance is significantly increased by replacing the lower engine bell with a larger extension.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.0333
			massMult = 1.05
			ignitions = 2
			ullage = true
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[engineSwitch] { %subtype = 8081 }
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			IspSL = 0.96808
			IspV = 1.04044
		}
		CONFIG
		{
			name = Belle-RLX81-8096 "Mafuni"
			description = Operational RLX81 variant, used in the "standardized" Belle-D and late model Belle-B upper stages. Improved in all respects over the previous versions and features a further enlarged engine bell.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.0333
			massMult = 1.05
			ignitions = 3
			ullage = false
			techRequired = advRocketry
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[engineSwitch] { %subtype = 8096 }
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			IspV = 1.06985
			IspSL = 0.89361
			!IGNITOR_RESOURCE,* {}
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}
		CONFIG
		{
			b9psSubtypeName = 8096
			name = Belle-RLX81-8247 "Mafuni-TV" // ATV Engine config for more restarts
			description = Version of Mafuni engine for the Hermes-Belle Target Vehicle. Minimum capability of five restarts and a demonstrated capability of fifteen restarts.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.0333
			massMult = 1.05
			ignitions = 15
			ullage = false
			techRequired = heavyRocketry
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[engineSwitch] { %subtype = 8096 }
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			IspV = 1.06985
			IspSL = 0.89361
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.05
			}
		}
		CONFIG
		{
			name = Belle-RLX81-8096-HDA "Mafuni-X"
			description = Mafuni engine converted to run on "High Density Acid" for increased performance.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.0914
			massMult = 1.05
			ignitions = 50
			ullage = false
			techRequired = propulsionSystems
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed2
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[engineSwitch] { %subtype = 8096HDA }
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4838
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-IV
				ratio = 0.5161
				DrawGauge = True
			}
			IspV = 1.11029
			IspSL = 0.80851
			!IGNITOR_RESOURCE,* {}
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}
		CONFIG
		{

			name = Belle-RLX81-8096-B "Mafuni-B"
			description = Mafuni engine with a long nozzle extension for the advanced drop tank Belle upper stage.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.1322
			massMult = 1.01
			ignitions = 15
			ullage = false
			techRequired = precisionPropulsion
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed2
			@runningEffectName:NEEDS[Waterfall] = running_engine_large
			%LinkB9PSModule[engineSwitch] { %subtype = 8096B }
			PROPELLANT
			{
				name = MMH
				ratio = 0.4724
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-IV
				ratio = 0.5276
				DrawGauge = True
			}
			IspV = 1.2022
			IspSL = 0.65957
			!IGNITOR_RESOURCE,* {}
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}
	}
	
//	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[engineSwitch]]
//	{
//		@switcherDescription = Engine Assembly
//		@switcherDescriptionPlural = Engine Assemblies
//		@SUBTYPE[*]:HAS[#name[8048]]
//		{
//			%title = RLX81-8048 Engine Assembly
//			%descriptionSummary = Early turbopump and nozzle design for the RLX81 used on the Belle-A
//			%desriptionDetail = Used on the RLX81-8048
//		}
//		@SUBTYPE[*]:HAS[#name[8081]]
//		{
//			%title = RLX81-8081 Engine Assembly
//			%descriptionSummary = Refined turbopump and increased nozzle size for the RLX81 used on the Belle-B
//			%desriptionDetail = Used on the RLX81-8081
//		}
//		@SUBTYPE[*]:HAS[#name[8096]]
//		{
//			%title = RLX81-8096 Engine Assembly
//			%descriptionSummary = Further enlarged engine bell for the RLX81 used in the "standardized" Belle-D and late model Belle-B upper stages.
//			%desriptionDetail = Used on the RLX81-8096, RLX81-8247 and RLX81-8096HDA
//		}
//		@SUBTYPE[*]:HAS[#name[8096HDA]]
//		{
//			@title = RLX81-8096-B Engine Assembly
//			@descriptionSummary = Mafuni engine converted to run on "High Density Acid" for increased performance.
//			@desriptionDetail = Used on the RLX81-8096HDA
//		}
//		@SUBTYPE[*]:HAS[#name[8096B]]
//		{
//			@title = RLX81-8096-B Engine Assembly
//			@descriptionSummary = Long nozzle extension for the advanced drop tank Agena upper stage.
//			@desriptionDetail = Used on the RLX81-8096-B
//		}
//	}
}

@PART[bluedog_Agena_Engine_8096C]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
		ignitions = 15
		ullage = True
		@atmosphereCurve
		{
			@key,0 = 0 336
			@key,1 = 1 75
		}
		@PROPELLANT[LiquidFuel]
		{
			@name = MMH
			@ratio = 0.4671
			@DrawGauge = False
		}
		@PROPELLANT[Oxidizer]
		{
			@name = NTO
			@ratio = 0.5329
			@DrawGauge = True
		}
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.2
		engineDecelerationSpeed = 0.35
	}
	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		type = ModuleEnginesRF
		techLevel = 2
   		origTechLevel = 2
		minTechLevel = 2
		engineType = U+
		modded = false
		configuration = Belle-RLX81-8096-C "Mafuni-C"
		
		CONFIG
		{
			name = Belle-RLX81-8096-C "Mafuni-C"
			description = This advanced variant of the Belle RLX81 engine family is more specialized that the rest. Using a scaled down and optimized thrust chamber and a large nozzle extension, it is able to reach very high ISPs given its propellant mix. 
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			massMult = 1
	//		ignitions = -1 //15-100 depending on certification is effectively unlimited 
			ullage = True
			pressureFed = False
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[WaterfallSwitch] { %subtype = Belle-RLX81-8096-C }
			PROPELLANT
			{
				name = MMH
				ratio = 0.4671
				DrawGauge = False
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5329
				DrawGauge = True
			}
			atmosphereCurve
			{
				key,0 = 0 336
				key,1 = 1 75
			}
			IspV = 1.000
			IspSL = 1.000
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}
		CONFIG
		{
			name = Belle-RLX81-2000 "Mafuni-2000"
			description = Belle upgrade for proposed Muo V upper stage.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			maxThrust *= 1.26404
			massMult = 1
			ignitions = 15
			ullage = True
			pressureFed = False
			techRequired = veryHeavyRocketry
			@powerEffectName:NEEDS[!Waterfall] = BDB_HypergolicUpperRed
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[WaterfallSwitch] { %subtype = Belle-RLX81-8096-C }
			PROPELLANT
			{
				name = MMH
				ratio = 0.4691
				DrawGauge = False
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.5309
				DrawGauge = True
			}
			atmosphereCurve
			{
				key,0 = 0 336
				key,1 = 1 75
			}
			IspV = 1.000
			IspSL = 1.000
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
		}		
		CONFIG
		{
			name = Belle-RLX81-LF2-SPS "Mafuni-LF2"
			description = Liquid Fluorine based design, proposed for use on the GE D-2 Kane vehicle, and later high performance Belle tugs.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			maxThrust *= 1.0056
			massMult = 1.1811
			ignitions = 15
			ullage = True
			pressureFed = False
			techRequired = heavyRocketry
			@powerEffectName:NEEDS[!Waterfall] = BDB_CryogenicUpper
			@runningEffectName:NEEDS[Waterfall] = running_engine
			%LinkB9PSModule[WaterfallSwitch] { %subtype = Belle-RLX81-LF2-SPS }
			PROPELLANT
			{
				name = LqdFluorine
				ratio = 0.3599
				DrawGauge = False
			}
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.6401
				DrawGauge = True
			}
			atmosphereCurve
			{
				key,0 = 0 476.8
				key,1 = 1 75
			}
			IspV = 1.000
			IspSL = 1.000
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.2
			}
			engineAccelerationSpeed = 3.2
			engineDecelerationSpeed = 0.35
		}

	}
	MODULE:NEEDS[Waterfall]
	{
		name = ModuleB9PartSwitch
		switcherDescription = Waterfall Config
		switcherDescriptionPlural = Waterfall Configs
		moduleID = WaterfallSwitch
		SUBTYPE
		{
			name = Belle-RLX81-8096-C
			title = Belle-RLX81-8096-C
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
					moduleID = 8096C
				}
				DATA
				{
					TEMPLATE
					{
						templateName = waterfall-hypergolic-white-upper-1
						overrideParentTransform = thrustTransform
						position = 0,0,-0.002
						rotation = 0, 0, 0
						scale = 0.65, 0.65, 0.65
					}
				}
			}
		}
		SUBTYPE
		{
			name =  Belle-RLX81-LF2-SPS
			title = Belle-RLX81-LF2-SPS
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
					moduleID = 8096C
				}
				DATA
				{
					TEMPLATE
					{
						templateName = waterfall-rf-hydroflourine-upper
						overrideParentTransform = thrustTransform
						position = 0,0,-0.002
						rotation = 0, 0, 0
						scale = 0.65, 0.65, 0.65
					}
				}
			}
		}
	}
	PLUME:NEEDS[!Waterfall]
	{
       		name = BDB_CryogenicUpper
		transformName = thrustTransform
		localRotation = 0,0,0
		localPosition = 0,0,0
		energy = 1
		speed = 1
		flarePosition = 0,0,-0.3
		flareScale = 0.2

		fumePosition = 0,0,0.3
		fumeScale = 1.4

		streamPosition = 0,0,0.4
		streamScale = 1

		shockconePosition = 0,0,1
		shockconeScale = 0.5
		emissionMult = 1
	}
	@MODULE[ModuleGimbal]
	{
		%gimbalRange = 5.0
		%useGimbalResponseSpeed = true
		%gimbalResponseSpeed = 16
	}	
}

@PART[bluedog_Agena_Engine_8096C]:AFTER[zzRealPlume]:NEEDS[zRealPlume,SmokeScreen,!RealismOverhaul,!Waterfall]
{
	%EFFECTS
	{
        	%BDB_CryogenicUpper
        		{
						MODEL_MULTI_SHURIKEN_PERSIST
						{
							transformName = turboFX
							localRotation = 0,0,0
							localPosition = 0,0,0
							fixedScale = 0.5
							energy = 1
							speed = 1
							emissionMult = 2
							name = turbopump
							modelName = Bluedog_DB/FX/PlumeParty/Engines/BDB/vernierPump
							fixedEmissions = false
							sizeClamp = 50
							randomInitalVelocityOffsetMaxRadius = 0.2

							linGrow
							{
								density = 1.0 0
								density = 0.5 0.2
								density = 0.2 1.5
								density = 0.0 3
							}
							emission
							{
								power = 1.0 1
								power = 0.01 0.1
								power = 0.0 0.0
							}
							speed
							{
								density = 1.0 1
								density = 0.0 0.8
							}
							energy
							{
								density = 1.0 1
								density = 0.0 0.8
							}

						}
		}
	}
}

@PART[bluedog_Agena_EngineShroud]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	@MODULE[ModuleResourceConverter]:NEEDS[!Kerbalism]
	{
		@INPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]
		{
			@ResourceName = Hydrazine
			@Ratio *= 0.00433
		}
		@OUTPUT_RESOURCE:HAS[#ResourceName[ElectricCharge]]
		{
			@Ratio *= 0.23
		}
	}
	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleB9PartSwitch
		switcherDescription = Fuel Cell Config
		switcherDescriptionPlural = Fuel Cell Configs
		moduleID = fuelCellSwitch
		SUBTYPE
		{
			name = None
			title = None
			descriptionSummary = No frills.
			descriptionDetail = Lightest and cheapest option.
			defaultSubtypePriority = 0
			addedMass = -0.05
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
				}

				moduleActive = False
			}
		}
		SUBTYPE
		{
			name = Hydrazine
			title = Hydrazine Fuel Cell
			descriptionDetail = A simple device that consumes Hydrazine to produce EC.

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
				}

				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Hydrazine
						Ratio = 0.00433
						FlowMode = STAGE_PRIORITY_FLOW
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 0.23
						DumpExcess = false
					}
				}
			}
		}
	}
	!MODULE[ModuleResourceConverter]:NEEDS[Kerbalism] {}
	
	MODULE:NEEDS[Kerbalism]
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 0.2
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}

	MODULE:NEEDS[Kerbalism]
	{
		name = ProcessController
		resource = _MonopropFuelCell
		title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
		capacity = 1
	}

	MODULE:NEEDS[Kerbalism]
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = Monoprop Oxygen Fuel Cell
			desc = #KERBALISM_MonopropO2FuelCell_desc2//Burns <b>MonoPropellant</b> and <b>Oxygen</b> gas, producing <b>Water</b> and <b>Nitrogen</b> gas as by-products.
			tech = basicScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MonopropFuelCell
			}
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		
		TANK
		{
			name = Hydrazine
			amount = full
			maxAmount = 100%
		}
	}
	
	!RESOURCE[MonoPropellant] {}
}

@PART[bluedog_Agena_EquipmentRack]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	@MODULE[ModuleResourceConverter]:NEEDS[!Kerbalism]
	{
		@INPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]
		{
			@ResourceName = Hydrazine
			@Ratio *= 0.00433
		}
		@OUTPUT_RESOURCE:HAS[#ResourceName[ElectricCharge]]
		{
			@Ratio *= 0.23
		}
	}
	@MODULE[ModuleResourceConverter]:NEEDS[!Kerbalism]
	{
		@INPUT_RESOURCE:HAS[#ResourceName[MonoPropellant]]
		{
			@ResourceName = Hydrazine
			@Ratio *= 0.00433
		}
		@OUTPUT_RESOURCE:HAS[#ResourceName[ElectricCharge]]
		{
			@Ratio *= 0.23
		}
	}
	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleB9PartSwitch
		switcherDescription = Fuel Cell Config
		switcherDescriptionPlural = Fuel Cell Configs
		moduleID = fuelCellSwitch
		SUBTYPE
		{
			name = None
			title = None
			descriptionSummary = No frills.
			descriptionDetail = Lightest and cheapest option.
			defaultSubtypePriority = 0
			addedMass = -0.05
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
				}

				moduleActive = False
			}
		}
		SUBTYPE
		{
			name = Hydrazine
			title = Hydrazine Fuel Cell
			descriptionDetail = A simple device that consumes Hydrazine to produce EC.

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
				}

				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Hydrazine
						Ratio = 0.00433
						FlowMode = STAGE_PRIORITY_FLOW
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 0.23
						DumpExcess = false
					}
				}
			}
		}
	}
	!MODULE[ModuleResourceConverter]:NEEDS[Kerbalism] {}	
	MODULE:NEEDS[Kerbalism]
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 0.2
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}
	MODULE:NEEDS[Kerbalism]
	{
		name = ProcessController
		resource = _MonopropFuelCell
		title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
		capacity = 1
	}
	MODULE:NEEDS[Kerbalism]
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = Monoprop Oxygen Fuel Cell
			desc = #KERBALISM_MonopropO2FuelCell_desc2//Burns <b>MonoPropellant</b> and <b>Oxygen</b> gas, producing <b>Water</b> and <b>Nitrogen</b> gas as by-products.
			tech = basicScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MonopropFuelCell
			}
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchTanks]]
	{
		@baseVolume *= 4.213483146
		
		@SUBTYPE,*
		{
			RESOURCE
			{
				name = Hydrazine
				unitsPerVolume = 1
			}
			@volumeAdded *= 4.213483146
			!tankType = DELETE
		}
		SUBTYPE
		{
			RESOURCE
			{
				name = UDMH
				unitsPerVolume = 0.389
			}
			RESOURCE
			{
				name = MON3
				unitsPerVolume = 0.611
			}
			name = TwoSPS
			transform = Mesh_TwoBall
		}
		SUBTYPE
		{
			RESOURCE
			{
				name = UDMH
				unitsPerVolume = 0.389
			}
			RESOURCE
			{
				name = MON3
				unitsPerVolume = 0.611
			}
			name = ThreeSPS
			transform = Mesh_ThreeBall
			volumeAdded = 2
			@volumeAdded *= 4.213483146
		}
	}
}

@PART[bluedog_GATV_SPS_RCS]:FOR[RealFuels_StockEngines]
{	
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
}

@PART[bluedog_GATV_SPS_LFO]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
//		ignitions = -1
		ullage = false
		pressureFed = True
		@atmosphereCurve
		{
			@key,0 = 0 225
			@key,1 = 1 90
		}
		@PROPELLANT[LiquidFuel]
		{
			@name = UDMH
			@ratio = 0.389
			@DrawGauge = False
		}
		@PROPELLANT[Oxidizer]
		{
			@name = MON3
			@ratio = 0.611
			@DrawGauge = True
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		type = ModuleEnginesRF
		configuration = Belle-ESPS-B "Nafuni"
		techLevel = 3
   		origTechLevel = 3
		engineType = O
		CONFIG
		{
			name = Belle-ESPS-B "Nafuni"
			description = Alternate secondary engines for the Belle upper stage system, sacrificing the fine-tuning thruster for another pressure fed liquid engine.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
	//		ignitions = -1
			ullage = false
			pressureFed = True
			PROPELLANT
			{
				name = UDMH
				ratio = 0.389
				DrawGauge = False
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.611
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 225
				key = 1 90
			}
		}
		CONFIG
		{
			name = TRW-Belle-ESPS-B "Nafuni"
			description = Upgrade for the Nafuni engine developed by TRW, using an electric pump system to allow it to draw directly from the Belle fuel tanks.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			massMult = 1.05
	//		ignitions = -1
			ullage = false
			pressureFed = false
			techRequired = generalConstruction
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			PROPELLANT
			{
				name = ElectricCharge
				ratio = 0.1825
			}
			atmosphereCurve
			{
				key = 0 305
				key = 1 90
			}

		}
		CONFIG
		{
			name = TRW-Belle-ESPS-B HDA "Nafuni-X"
			description = Upgrade for the Nafuni engine developed by TRW, using an electric pump system to allow it to draw directly from the Belle fuel tanks. HDA version
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.06
			massMult = 1.05
	//		ignitions = -1
			ullage = false
			pressureFed = false
			techRequired = propulsionSystems
			
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4838
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-IV
				ratio = 0.5161
				DrawGauge = True
			}
			PROPELLANT
			{
				name = ElectricCharge
				ratio = 0.1825
			}
			atmosphereCurve
			{
				key = 0 305
				key = 1 90
			}
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = Hydrazine
			amount = full
			maxAmount = 10%
		}
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[bluedog_GATV_SPS]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
//		ignitions = -1
		ullage = false
		pressureFed = True
		@atmosphereCurve
		{
			@key,0 = 0 225
			@key,1 = 1 90
		}
		@PROPELLANT[LiquidFuel]
		{
			@name = UDMH
			@ratio = 0.389
			DrawGauge = False
		}
		@PROPELLANT[Oxidizer]
		{
			name = MON3
			ratio = 0.611
			DrawGauge = True
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		type = ModuleEnginesRF
		configuration = Belle-ESPS-A "Nafuni"
		techLevel = 3
   		origTechLevel = 3
		engineType = O
		CONFIG
		{
			name = Belle-ESPS-A "Nafuni"
			description = Alternate secondary engines for the Belle upper stage system, sacrificing the fine-tuning thruster for another pressure fed liquid engine.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
	//		ignitions = -1
			ullage = false
			pressureFed = True
			PROPELLANT
			{
				name = UDMH
				ratio = 0.389
				DrawGauge = False
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.611
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 225
				key = 1 90
			}
		}
		CONFIG
		{
			name = TRW-Belle-ESPS-A "Nafuni"
			description = Upgrade for the Nafuni engine developed by TRW, using an electric pump system to allow it to draw directly from the Belle fuel tanks.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			massMult = 1.05
	//		ignitions = -1
			ullage = false
			pressureFed = false
			techRequired = generalConstruction
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4492
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 0.5508
				DrawGauge = True
			}
			PROPELLANT
			{
				name = ElectricCharge
				ratio = 0.2825
			}
			atmosphereCurve
			{
				key = 0 305
				key = 1 90
			}

		}
		CONFIG
		{
			name = TRW-Belle-ESPS-A HDA "Nafuni-X"
			description = Upgrade for the Nafuni engine developed by TRW, using an electric pump system to allow it to draw directly from the Belle fuel tanks. HDA version
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.06
			massMult = 1.05
	//		ignitions = -1
			ullage = false
			pressureFed = false
			techRequired = propulsionSystems
			
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4838
				DrawGauge = False
			}
			PROPELLANT
			{
				name = IRFNA-IV
				ratio = 0.5161
				DrawGauge = True
			}
			PROPELLANT
			{
				name = ElectricCharge
				ratio = 0.2825
			}
			atmosphereCurve
			{
				key = 0 305
				key = 1 90
			}
		}
	}
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		
		TANK
		{
			name = UDMH
			amount = full
			maxAmount = 35.01%
		}
		TANK
		{
			name = MON3
			amount = full
			maxAmount = 54.99%
		}
		TANK
		{
			name = Hydrazine
			amount = full
			maxAmount = 10%
		}
	}
	
	!RESOURCE[MonoPropellant] {}
}

@PART[bluedog_Agena_RetroThrustModule]:FOR[RealFuels_StockEngines]	
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		ullage = False
		@atmosphereCurve
		{
			@key,0 = 0 291
			@key,1 = 1 100
		}
		@PROPELLANT[MonoPropellant]
		{
			@name = Hydrazine
			@ratio = 1
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		configuration = Hydrazine
		CONFIG
		{
			name = MMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.5
			PROPELLANT
			{
				name = MMH
				ratio = 1.6477
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 2.37
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 327
				key = 1 62
			}
		}
		CONFIG
		{
			name = Hydrazine
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.8
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = Hydrazine
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
				ratio = 1
			}
			atmosphereCurve
			{
				key = 0 240
				key = 1 100
			}
		}
		CONFIG
		{
			name = HTP
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.8
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = Hydrazine
				ratio = 1
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 240
				key = 1 100
			}
		}
		CONFIG
		{
			name = Nitrogen
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.4
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = Nitrogen
				ratio = 1
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 220
				key = 1 100
			}
		}
		CONFIG
		{
			name = Helium
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.4
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = Helium
				ratio = 1
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 220
				key = 1 100
			}
		}
		CONFIG
		{
			name = UDMH+IRFNA-III
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = UDMH
				ratio = 2.0961
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = IRFNA-III
				ratio = 2.57
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 291
				key = 1 100
			}
		}
		CONFIG
		{
			name = UDMH+IRFNA-IV
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.06
			massMult = 1
			ullage = False
			PROPELLANT
			{
				name = UDMH
				ratio = 2.0961
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = IRFNA-IV
				ratio = 2.69
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 300
				key = 1 100
			}
		}
	}
}

@PART[bluedog_ATDA_RCS]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		
		TANK
		{
			name = Hydrazine
			amount = full
			maxAmount = 100%
		}
	}
	!RESOURCE[MonoPropellant] {}
}

@PART[bluedog_Keyhole_OCV_KH7]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		ignitions = -1
		ullage = False
		pressureFed = true
		@PROPELLANT[MonoPropellant]
		{
			@name = MMH
			@ratio = 0.4943
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			@name = NTO
			@ratio = 0.5057
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		type = ModuleEnginesRF
		configuration = Hydrazine
		techLevel = 0
		origTechLevel = 0
		engineType = O
		CONFIG
		{
			name = Aerozine50+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.6
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 1.6111
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 1.969
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.05
			}
		}
		CONFIG
		{
			name = UDMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.4
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}
		CONFIG
		{
			name = MMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.2
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Hydrazine
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = Hydrazine
				ratio = 1
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.05
			}
		}
	}
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = Hydrazine
			amount = #$/RESOURCE[MonoPropellant]/maxAmount$
			@amount *= 5
			maxAmount = #$amount$
		}
		TANK
		{
			name = ElectricCharge
			amount = #$/RESOURCE[ElectricCharge]/maxAmount$
			maxAmount = #$amount$
			%utilization = 10
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[ElectricCharge]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[ElectricCharge]/maxAmount$
		@temp /= #$TANK[ElectricCharge]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[MonoPropellant] {}
}

@PART[bluedog_Corona_Retro]:FOR[RealFuels_StockEngines]
{
	
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		@atmosphereCurve
		{
			@key,0 = 0 294
			@key,1 = 1 100
		}
		!PROPELLANT,* {}

		PROPELLANT
		{
			name = HTPB
			ratio = 100.000000
			DrawGauge = True
		}
		@curveResource = HTPB
	}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = S+
		modded = false
		configuration = SG-RV4 Retro Pack

		CONFIG
		{
			name = SG-RV4 Retro Pack
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			
			PROPELLANT
			{
				name = HTPB
				ratio = 100.000000
				DrawGauge = True
			}
			useThrustCurve = true
			curveResource = HTPB
			thrustCurve
			{
				key = 0 0.15 0 50
				key = 0.05 1 2 0
				key = 1 1 0 0
			}
			atmosphereCurve
			{
				key = 0 294
				key = 1 100
			}
			IspSL 1.0000
			IspV = 1.0000
			ignitions = 1
			ullage = false
			pressureFed = false
			allowShutdown = False
		}
	}

	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Nitrogen
			ratio = 1.000
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = Hydrazine
			amount = #$/RESOURCE[MonoPropellant]/maxAmount$
			@amount$ *=5
			maxAmount = #$amount$
		}
	}

	@RESOURCE[SolidFuel]
	{
		@name = PSPC
		@amount *= 4.213483146
		@maxAmount *= 4.213483146
	}
		
	!RESOURCE[MonoPropellant] {}
	!RESOURCE[SolidFuel] {}
}

@PART[bluedog_Agena_UllageMotor,bluedog_Agena_AInterstage,bluedog_Agena_StraightInterstage]:FOR[RealFuels_StockEngines]
{

	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		@atmosphereCurve
		{
			@key,0 = 0 154
			@key,1 = 1 118
		}
		!PROPELLANT[*] {}

		PROPELLANT
		{
			name = HTPB
			ratio = 1
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		modded = false
		configuration = HTPB
		
		CONFIG
		{
			name = HTPB
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			curveResource = HTPB
			PROPELLANT
			{
				name = HTPB
				ratio = 100
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 154
				key = 1 118
			}
			IspSL = 1.000
			IspV = 1.000
			ignitions = 1
			ullage = false
			pressureFed = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = HTPB
		basemass = -1
		TANK
		{
			name = HTPB
			amount = full
			maxAmount = 100%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[bluedog_Agena_Subsat_Hitchhiker]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = PSPC
			ratio = 100.000000
			DrawGauge = True
		}
	}
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = S+
		modded = false
		configuration = PSPC

		CONFIG
		{
			name = PSPC
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = PSPC
				ratio = 100
				DrawGauge = false
			}
			IspSL = 1.0000
			IspV = 1.0000
			ignitions = 1
			ullage = false
			pressureFed = false
			allowShutdown = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		basemass = -1
		TANK
		{
			name = Hydrazine
			amount = #$/RESOURCE[MonoPropellant]/maxAmount$
			@amount *=5
			maxAmount = #$amount$
		}
		TANK
		{
			name = ElectricCharge
			amount = #$/RESOURCE[ElectricCharge]/maxAmount$
			maxAmount = #$amount$
			%utilization = 10
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[ElectricCharge]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[ElectricCharge]/maxAmount$
		@temp /= #$TANK[ElectricCharge]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[ElectricCharge] {}
	@RESOURCE[SolidFuel]
	{
		@name = PSPC
		@amount *= 4.213483146
		@maxAmount *= 4.213483146
	}
		
	!RESOURCE[MonoPropellant] {}
	!RESOURCE[SolidFuel] {}
}
@PART[bluedog_Agena_SOT_1p875m,bluedog_Agena_SOT_2p5m]:FOR[RealFuels_StockEngines]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = Aerozine50
			amount = full
			maxAmount = 45.00153627%
		}
		TANK
		{
			name = NTO
			amount = full
			maxAmount = 54.99846373%
		}
	}
	
	!RESOURCE,* {}
}
}