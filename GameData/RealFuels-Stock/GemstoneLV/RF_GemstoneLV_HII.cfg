@PART[gemstone_engine_le7_s0_1]:NEEDS[GemstoneLV]:FOR[RealFuels_StockEngines]
{
	@mass = 0.4625
	
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 274.5
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running_closed
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.729
			DrawGauge = true
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.271
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 439
			key = 1 315
			key = 6 0.001
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 4
		origTechLevel = 4
		engineType = L+
		configuration = LE-7
		modded = false
		origMass = 0.43
		CONFIG
		{
			name = LE-7
			description = Developed as a first stage engine for the Japanese H-II.
			maxThrust = 269.5
			minThrust = 269.5
			massMult = 1
			ignitions = 1
			ullage = True		
			%runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.729
				DrawGauge = true
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.271
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 446
				key = 1 349
			}
			IspSL = 1.28782287
			IspV = 1.351515151
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = LE-7A
			description = Simplified design for the H-IIA. Lower cost and better reliability, at the cost of lower performance.
			maxThrust = 274.5
			minThrust = 197.5
			massMult = 0.99709
			ignitions = 1
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.732
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.268
			}
			atmosphereCurve
			{
				key = 0 429
				key = 1 326
			}
			IspSL = 1.20295202952
			IspV = 1.3
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = LE-7A-2
			description = A Redesigned nozzle extension allowed for the LE-7A to achieve its intended performance, at the cost of slightly more weight.
			maxThrust = 274.5
			minThrust = 197.5
			massMult = 1.06512
			ignitions = 1
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
			techRequired =
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.732
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.268
			}
			atmosphereCurve
			{
				key = 0 440
				key = 1 338
			}
			IspSL = 1.247232472324
			IspV = 1.3056379
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[gemstone_engine_le5a_s0_1]:NEEDS[GemstoneLV]:FOR[RealFuels_StockEngines]
{
	@mass = 0.06375
	
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 25.725
//		%engineID:NEEDS[Waterfall] = 
		ignitions = 0
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running_closed
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.706
			DrawGauge = true
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.294
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		atmosphereCurve
		{
			key = 0 439
			key = 1 315
			key = 6 0.001
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 4
		origTechLevel = 4
		engineType = U+
		configuration = LE-7
		modded = false
		origMass = 0.06375
//		%engineID:NEEDS[Waterfall] = 
		CONFIG
		{
			name = LE-5
			description = #LOC_gemstone_lv_gemstone_engine_le5a_s0_1_description
			maxThrust = 25.725
			minThrust = 25.725
			massMult = 1
			ignitions = 0
			ullage = True		
			%runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.706
				DrawGauge = true
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.294
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 450
				key = 1 150
			}
			IspSL = 1.20967741
			IspV = 1.27118644
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 1.5
			}
		}
		CONFIG
		{
			name = LE-5A
			description = 
			maxThrust = 30.375
			minThrust = 30.375
			massMult = 0.972549
			ignitions = 0
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
//			techRequired =
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.732
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.268
			}
			atmosphereCurve
			{
				key = 0 452
				key = 1 152
			}
			IspSL = 1.2258064516
			IspV = 1.27683615819
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 1.5
			}
		}
		CONFIG
		{
			name = LE-5B
			description = 
			maxThrust = 34.3
			minThrust = 10.29
			massMult = 1.117647
			ignitions = 0
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
//			techRequired =
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.732
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.268
			}
			atmosphereCurve
			{
				key = 0 447
				key = 1 150
			}
			IspSL = 1.2096774193
			IspV = 1.2627118644
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 1.5
			}
		}
		CONFIG
		{
			name = LE-5B-2
			description = 
			maxThrust = 36.225
			minThrust = 10.8675
			massMult = 1.1372549
			ignitions = 0
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
//			techRequired =
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.732
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.268
			}
			atmosphereCurve
			{
				key = 0 447
				key = 1 150
			}
			IspSL = 1.2096774193
			IspV = 1.2627118644
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 1.5
			}
		}
	}
}

@PART[h2_fuel_tank_s1p2_1]:HAS[@RESOURCE[LqdHydrogen],@RESOURCE[Oxidizer],!MODULE[ModuleFuelTanks]]:FOR[RealFuels]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		@volume += #$/RESOURCE[LqdHydrogen]/maxAmount$
		type = BalloonCryo
		basemass = -1
	}

	!RESOURCE[LqdHydrogen] {}
	!RESOURCE[Oxidizer] {}
}

@PART[h2_fuel_tank_s2_1]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleFuelTanks]]:FOR[RealFuels]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume *= 5
		type = BalloonCryo
		basemass = -1
	}

	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[h2_special_fuel_tank_s2_1]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleFuelTanks]]:FOR[RealFuels]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume *= 5
		type = BalloonCryo
		basemass = -1
	}

	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[gemstone_engine_srbem_s1_1]:FOR[RealFuels_StockEngines]
{

	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF

		@atmosphereCurve
		{
			@key,0 = 0 267
			@key,1 = 1 248
		}
		!PROPELLANT[*] {}

		PROPELLANT
		{
			name = HTPB
			ratio = 100.000000
			DrawGauge = True
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 3
		minTechLevel = 3
		origTechLevel = 3
		engineType = S
		configuration = #LOC_gemstone_lv_gemstone_engine_srbem_s1_1
		modded = false

		CONFIG
		{
			name = #LOC_gemstone_lv_gemstone_engine_srbem_s1_1
			description = #LOC_gemstone_lv_gemstone_engine_srbem_s1_1_description
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			minThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = HTPB
				ratio = 100
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 295
				key = 1 218
			}
			IspSL = 1.135416666
			IspV = 1.04982206
			useThrustCurve = True
			curveResource = HTPB
			thrustCurve
			{
				key = 1.00000 0.75862  -2.05481   0.00000
				key = 0.97695 0.80460  -1.93740  -1.93749
				key = 0.95254 0.85057  -1.83268  -1.83275
				key = 0.92677 0.89655  -0.57957  -1.73876
				key = 0.86613 0.93103  -0.55811  -0.55811
				key = 0.80320 0.96552  -0.40363  -0.53818
				key = 0.76011 0.98276  -0.39655  -0.39655
				key = 0.71625 1.00000   0.25981  -0.38971
				key = 0.65046 0.98276   0.26437   0.26437
				key = 0.58581 0.96552   0.32291   0.26909
				key = 0.51547 0.94253   0.33078   0.33078
				key = 0.44682 0.91954   0.33905   0.33905
				key = 0.37986 0.89655   0.86937   0.34774
				key = 0.34096 0.86207   0.90415   0.90413
				key = 0.30359 0.82759   0.62788   0.94180
				key = 0.24981 0.79310   0.65518   0.65517
				key = 0.19832 0.75862   0.41097   0.68495
				key = 0.14323 0.73563   0.42382   0.42381
				key = 0.08984 0.71264   0.43749   0.43748
				key = 0.03814 0.68966  10.18139   0.45207
				key = 0.02703 0.56552  12.42758  12.39233
				key = 0.01812 0.44138  15.96269  15.86327
				key = 0.01141 0.31724  22.43031  22.01518
				key = 0.00690 0.19310  40.18794  35.80415
				key = 0.00458 0.06897   7.81354  90.90481
				key = 0.00114 0.03448  16.10278  14.51086
				key = 0.00000 0.01000   0.00000  39.65709
			}
			ignitions = 1
			ullage = false
			pressureFed = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = HTPB
		basemass = -1
		TANK
		{
			name = HTPB
			amount = full
			maxAmount = 100%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[gemstone_engine_srbem_s1_1]:AFTER[GemstoneLV]
{
	!EFFECTS {}
}
@PART[gemstone_engine_srbem_s1_1]:NEEDS[zRealPlume,SmokeScreen,GemstoneLV]// BACC "Thumper" Solid Fuel Booster
{
	PLUME
	{
		name = Solid-Lower
		transformName = thrustTransform
		localRotation = 0,0,0
		flarePosition = 0,0,0.0
		plumePosition = 0,0,0.2
		smokePosition = 0,0,0.1
		slagPosition = 0,0,0
		flareScale = 1
		plumeScale = 1
		smokeScale = 1.2
		slagScale = 0.7
		energy = 1
		speed = 1
		emissionMult = 0.5
	}
	@MODULE[ModuleEngines*]
	{
		%powerEffectName = Solid-Lower
	}
	@MODULE[ModuleEngineConfigs]
	{
		@CONFIG,*
		{
			%powerEffectName = Solid-Lower
		}
	}
}