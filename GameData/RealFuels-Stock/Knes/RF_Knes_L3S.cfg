@PART[Knes_Command_Minus,_Knes_L3S_AR4_Avionics,_Knes_L3S_Avionics_250]:FOR[RealFuels_StockEngines]
{
	@mass /= 4
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1

		TANK
		{
			name = Hydrazine
			amount = #$/RESOURCE[MonoPropellant]/maxAmount$
			@amount *= 5
			maxAmount = #$amount$
		}
		TANK
		{
			name = ElectricCharge
			amount = #$/RESOURCE[ElectricCharge]/maxAmount$
			maxAmount = #$amount$
			%utilization = 10
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[ElectricCharge]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[ElectricCharge]/maxAmount$
		@temp /= #$TANK[ElectricCharge]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[MonoPropellant] {}
}

@PART[Knes_Engine_Zebulon]:NEEDS[Knes]:FOR[RealFuels_StockEngines] // HM-7 series used on Ariane LV's
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 15.6
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running_closed
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.7893
			DrawGauge = True
			%resourceFlowMode = STACK_PRIORITY_SEARCH
			
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.2107
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}		
		!atmosphereCurve {}		
		atmosphereCurve
		{
			key = 0 440
			key = 1 308
			key = 6 0.001
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 3
		origTechLevel = 3
		engineType = U
		configuration = HM7 "Zebulon" Liquid Fuel Engine
		modded = false
		origMass = 0.04125
		
		CONFIG
		{
			name = HM7 "Zebulon" Liquid Fuel Engine
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 15.6
			massMult = 0.909
			ignitions = 5
			ullage = True
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7893
				DrawGauge = True
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2107
				DrawGauge = False
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 440
				key = 1 308
			}
			IspSL = 1.5323383
			IspV = 1.294117647
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		
		CONFIG
		{
			name = HM7B "Zebulon 2" Liquid Fuel Engine
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 16.05
			massMult = 1
			ignitions = 5
			ullage = True
			runningEffectName:NEEDS[Waterfall] = running_closed
			techRequired = advRocketry
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7812
				DrawGauge = True
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2188
				DrawGauge = False
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 442.2
				key = 1 310
			}
			IspSL = 1.54228855
			IspV = 1.32
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = HM7B+ "Zebulon 3" Liquid Fuel Engine
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 16.15
			massMult = 1
			ignitions = 5
			ullage = True
			runningEffectName:NEEDS[Waterfall] = running_closed
			techRequired = heavyRocketry
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7774
				DrawGauge = True
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2226
				DrawGauge = False
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 444.2
				key = 1 310
			}
			IspSL = 1.54228855
			IspV = 1.325970
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = HM7B++ "Zebulon 4" Liquid Fuel Engine
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 16.2
			massMult = 1
			ignitions = 5
			ullage = True
			runningEffectName:NEEDS[Waterfall] = running_closed
			techRequired = heavierRocketry
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7682
				DrawGauge = True
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2318
				DrawGauge = False
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 445.6
				key = 1 310
			}
			IspSL = 1.54228855
			IspV = 1.3283582
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[_Knes_L3S_H8]:FOR[RealFuels_StockEngines]
{
	@mass = 0.48875
	!MODULE[ModuleFuelTanks],* {}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 7052.0477815
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = BalloonCryo
		basemass = -1
	}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[Knes_Fuel_Tanks_1875_H10]:FOR[RealFuels_StockEngines]
{
	@mass = 0.485
	!MODULE[ModuleFuelTanks],* {}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 9000
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = BalloonCryo
		basemass = -1
	}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_Cryo_LH2_125,_Knes_L3S_H4,_Knes_L3S_H22,_Knes_L3S_H45]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleFuelTanks]]:BEFORE[zRealFuels_StockEngines]
{
	@mass *= 0.25
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[Oxidizer]/maxAmount$
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume *= 5
		type = BalloonCryo
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_Engine_Viking5]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID:NEEDS[Waterfall] = MainNozzles
		@maxThrust = 172.5
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		@PROPELLANT[LiquidFuel]
		{
			@name = UH25
			@ratio = 0.5071
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@PROPELLANT[Oxidizer]
		{
			name = NTO
			ratio = 0.4929
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 281
			key = 1 248
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		engineID = Main
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = L
		modded = false
		configuration = L3S "Viking 2"
		origMass = 0.194
		%engineID:NEEDS[Waterfall] = MainNozzles
		CONFIG
		{
			name = L3S "Viking 2"
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a first-stage booster for 0.9375 Rockets.
			maxThrust = 172.5
			ignitions = 1
			ullage = true
			pressureFed = False
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4964
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5036
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 281
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.0218181818
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = L3S "Viking 2B"
			description = First stage engine for Ariane 2/3. Uses UH25 for extra performance.
			maxThrust = 180
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = advRocketry
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = L3S "Viking 5C"
			description = First stage engine for Ariane 4
			maxThrust = 189.5
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = heavyRocketry
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = L3S "Viking 6"
			description = Booster engine for Ariane 4
			maxThrust = 189.5
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = heavyRocketry
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[_Knes_L3S_HM4_Engine]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 20
		ignitions = 3
		ullage = True
		%engineID:NEEDS[Waterfall] = Rutherford
		%runningEffectName:NEEDS[Waterfall] = running
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.7682
			DrawGauge = True
			resourceFlowMode = STACK_PRIORITY_SEARCH
			
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio =	0.2318
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 412
			key = 1 90
			key = 6 0.001
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 3
		origTechLevel = 3
		engineType = U
		configuration = HM4 "Themis" Cryogenic Engine
		modded = false
		%engineID:NEEDS[Waterfall] = Rutherford
		CONFIG
		{
			name = HM4 "Themis" Cryogenic Engine
			description = This small 1.25 Cryogenic engine provides a nice kick to lift small payloads to considerable heights.
			maxThrust = 20
			massMult = 1
			ignitions = 2
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7682
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2318
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 445.6
				key = 1 310
			}
			IspSL = 1.54228855
			IspV = 1.3283582
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[_Knes_L3S_L3S_HM60_Engine]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 45
		@minThrust = 30
		%engineID:NEEDS[Waterfall] = Rutherford
		ignitions = 1
		ullage = True
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.733
			DrawGauge = True
			%resourceFlowMode = STACK_PRIORITY_SEARCH
			
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio =	0.267
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}		
		!atmosphereCurve {}		
		atmosphereCurve
		{
			key = 0 465
			key = 1 235
			key = 6 0.001
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 3
		origTechLevel = 3
		engineType = U+
		configuration = HM60 "Themis" Liquid Fuel Engine
		modded = false
		%engineID:NEEDS[Waterfall] = Rutherford
		CONFIG
		{
			name = HM60 "Themis" Liquid Fuel Engine
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 2.5 Rockets.
			maxThrust = 45
			minThrust = 30
			massMult = 1
			ignitions = 5
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.733
				DrawGauge = True
				%resourceFlowMode = STACK_PRIORITY_SEARCH
				
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio =	0.267
				%resourceFlowMode = STACK_PRIORITY_SEARCH
			}		
			atmosphereCurve
			{
				key = 0 465
				key = 1 232
			}
			IspSL = 1.5323383
			IspV = 1.8267716535

			!IGNITOR_RESOURCE,* {}
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = HM60A "Themis" Liquid Fuel Engine
			description = Theoretical thrust upgrade to the HM60
			maxThrust = 60
			minThrust = 60
			@minThrust * = 0.75
			massMult = 1
			ignitions = 5
			ullage = True
			%runningEffectName:NEEDS[Waterfall] = running_closed
			techRequired = heavyRocketry
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7682
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2318
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 445
				key = 1 90
				key = 6 0.001
			}
			IspSL = 0.7377
			IspV = 1.2787356321
			!IGNITOR_RESOURCE,* {}
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[_Knes_L3S_L33_Engine]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 178.25
		%engineID:NEEDS[Waterfall] = MainNozzles
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		!PROPELLANT,* {}
		PROPELLANT
		{
			name = UH25
			ratio = 0.4964
			DrawGauge = True
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = NTO
			ratio = 0.5036
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 292
			key = 1 260
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		engineID = Main
		type = ModuleEnginesRF
		techLevel = 2
		origTechLevel = 2
		engineType = L+
		modded = false
		configuration = L33 "Byrding" Viking-4
		origMass = 0.194
		%engineID:NEEDS[Waterfall] = MainNozzles
		
		CONFIG
		{
			name = L33 "Byrding" Viking-4
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 178.25
			minThrust = 178.25
			ignitions = 1
			massMult = 1
			ullage = true
			pressureFed = False
			%runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4964
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.5036
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 296
				key = 1 200
			}
			
			IspSL = 0.763358778
			IspV = 0.927899686
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = L33 "Byrding" Viking-4B
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 201.25
			minThrust = 201.25
			ignitions = 1
			ullage = true
			pressureFed = False
			%runningEffectName:NEEDS[Waterfall] = running
			massMult = 1.064
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 296
				key = 1 210
			}
			
			IspSL = 0.801526717
			IspV = 0.98026315789
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = L33 "Byrding" Viking-4B+
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster for 1.875 Rockets.
			maxThrust = 207.147999
			minThrust = 207.147999
			ignitions = 1
			ullage = true
			pressureFed = False
			%runningEffectName:NEEDS[Waterfall] = running
			massMult = 1.0
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 298
				key = 1 210
			}
			
			IspSL = 0.801526717
			IspV = 0.927899686
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
}

@PART[_Knes_L3S_L140]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID:NEEDS[Waterfall] = MainNozzles
		@maxThrust = 690
		@mass = 3.25
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		@PROPELLANT[LiquidFuel]
		{
			@name = UH25
			@ratio = 0.5071
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@PROPELLANT[Oxidizer]
		{
			name = NTO
			ratio = 0.4929
			%resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		%engineID:NEEDS[Waterfall] = MainNozzles
		type = ModuleEnginesRF
		techLevel = 2
		origTechLevel = 2
		engineType = L
		modded = false
		configuration = Ariane L-140 "Drakkar"
		
		CONFIG
		{
			name = Ariane L-140 "Drakkar"
			description = The first L140 stage blasted into the sky on Christmas Eve, 1979. An early Christmas present for the thousands of workers throughout Kerbin and at KSC who were involved in its development and production. From the onset, the launcher was to be developed for the purpose of sending commercial satellites into geosynchronous orbit, unlike many other competing launchers, which had been typically developed for other purposes and subsequently adapted, such as ballistic missiles
			maxThrust = 690
			minThrust = 690
			ignitions = 1
			ullage = true
			pressureFed = False
			runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = UDMH
				ratio = 0.4964
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5036
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 281
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.0218181818
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
		CONFIG
		{
			name = Ariane L-140B "Drakkar"
			description = First stage for Ariane 2/3. Uses UH25 for extra performance.
			maxThrust = 720
			minThrust = 720
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = advRocketry
			runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 28000
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = Default
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_L220]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID:NEEDS[Waterfall] = MainNozzles
		@maxThrust = 758
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		@PROPELLANT[LiquidFuel]
		{
			@name = UH25
			@ratio = 0.5071
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@PROPELLANT[Oxidizer]
		{
			name = NTO
			ratio = 0.4929
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		%engineID:NEEDS[Waterfall] = MainNozzles
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = L
		modded = false
		configuration = Ariane L-220 "Valkyrie"
		
		CONFIG
		{
			name = Ariane L-220 "Valkyrie"
			maxThrust = 758
			minThrust = 758
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = heavyRocketry
			runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 36748.6033
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = Default
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_L220N]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID:NEEDS[Waterfall] = MainNozzles
		ignitions = 1
		@maxThrust = 947.5
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		@PROPELLANT[LiquidFuel]
		{
			@name = UH25
			@ratio = 0.5071
		}
		@PROPELLANT[Oxidizer]
		{
			name = NTO
			ratio = 0.4929
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		%engineID:NEEDS[Waterfall] = MainNozzles
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = L
		modded = false
		configuration = Ariane L-220N "Ragnarok"
		
		CONFIG
		{
			name = Ariane L-220N "Ragnarok"
			maxThrust = 947.5
			minThrust = 947.5
			ignitions = 1
			ullage = true
			pressureFed = False
			techRequired = heavyRocketry
			runningEffectName:NEEDS[Waterfall] = running
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 36748.6033
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = Default
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_P120E]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@mass = 3.46625
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 1300
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = HTPB
			ratio = 100.000000
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 2
		origTechLevel = 2
		engineType = S
		modded = false
		configuration = P120E "Phobos"
		origMass = 3.46625
		CONFIG
		{
			name = P120E "Phobos"
			description = The P120E "Phobos" is a truly massive solid rocket fuel booster.
			maxThrust = 1300
			minThrust = 1300			
			PROPELLANT
			{
				name = HTPB
				ratio = 100
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 273.1
				key = 1 255
			}
			IspV = 1.050384615
			IspSL = 1.0625
			curveResource = HTPB
			chamberNominalTemp	= 1600
			maxEngineTemp = 1850
			thrustCurve
			{
				key = 0 0.2 0.6566457 0.6566457
				key = 0.08 0.7826234 11.38028 11.38028
				key = 0.12 1.091428 0 0
				key = 0.177 1.072238 -0.3012535 -0.3012535
				key = 0.832 0.9977316 0.2489114 0.2489114
				key = 0.91 1.052388 1.565168 1.565168
				key = 0.9730649 1.160696 0 0
				key = 1 0.93 -4.794868 -6.284284
			}
			ignitions = 1
			ullage = false
			pressureFed = false
			massMult = 1
			allowShutdown = False
		}
	
	}
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
//		volume = 29878.55087
		volume = 0
		@volume += #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = HTPB
		dedicated = true
		TANK
		{
			name = HTPB
			amount = full
			maxAmount = 100.000000%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[_Knes_L3S_PAL]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		%engineID:NEEDS[Waterfall] = MainNozzles
		ignitions = 1
		ullage = True
		%runningEffectName:NEEDS[Waterfall] = running
		@PROPELLANT[LiquidFuel]
		{
			@name = UH25
			@ratio = 0.5071
			@resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@PROPELLANT[Oxidizer]
		{
			name = NTO
			ratio = 0.4929
			@resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = Water
			ratio = 0.01
			ignoreForIsp = True
			DrawGauge = False
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 278
			key = 1 248
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		%engineID:NEEDS[Waterfall] = MainNozzles
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = L
		modded = false
		configuration = Ariane "Drako"
		
		CONFIG
		{
			name = Ariane "Drako"
			description = Combining high thrust with reasonable efficiency, this engine excels when used as a first-stage booster for 0.9375 Rockets.
			maxThrust = 189.5
			ignitions = 1
			ullage = true
			pressureFed = False
			runningEffectName:NEEDS[Waterfall] = running_closed
			PROPELLANT
			{
				name = UH25
				ratio = 0.5071
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.4929
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = Water
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			atmosphereCurve
			{
				key = 0 278
				key = 1 248
			}			
			IspSL = 1.0000
			IspV = 1.01090909
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}
	
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 8250
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = Default
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_L33]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@mass = 0.98
	!MODULE[ModuleFuelTanks],* {}
	MODULE
	{
		name = ModuleFuelTanks
//		volume = 8,278.9430894308
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = Default
		basemass = -1
	}
	
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[_Knes_L3S_PAP]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 157.5
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = HTPB
			ratio = 100.000000
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 2
		origTechLevel = 2
		engineType = S
		modded = false
		configuration = KEREB-D "Pollux"

		CONFIG
		{
			name = KEREB-D "Pollux" 7.7
			description = A small canister filled with what appears to be solid rocket fuel.
			maxThrust = 157.5
			%LinkB9PSModule[engineSwitch] { %subtype = SEP7.7 }
			PROPELLANT
			{
				name = HTPB
				ratio = 100
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 254.5
				key = 1 231.4
			}
			IspV = 1.018
			IspSL = 1.006086956
			curveResource = HTPB
			chamberNominalTemp	= 1600
			maxEngineTemp = 1850
			thrustCurve
			{
				key = 0 0.2 0.6566457 0.6566457
				key = 0.08 0.7826234 11.38028 11.38028
				key = 0.12 1.091428 0 0
				key = 0.177 1.072238 -0.3012535 -0.3012535
				key = 0.832 0.9977316 0.2489114 0.2489114
				key = 0.91 1.052388 1.565168 1.565168
				key = 0.9730649 1.160696 0 0
				key = 1 0.93 -4.794868 -6.284284
			}
			ignitions = 1
			ullage = false
			pressureFed = false
			massMult = 1
			allowShutdown = False
		}
		
		CONFIG
		{
			name = KEREB-D "Pollux" 9.5
			description = A small canister filled with what appears to be solid rocket fuel.
			maxThrust = 162.5
			%LinkB9PSModule[engineSwitch] { %subtype = SEP9.9 }
			PROPELLANT
			{
				name = HTPB
				ratio = 100
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 254.5
				key = 1 231.4
			}
			IspV = 1.018
			IspSL = 1.006086956
			curveResource = HTPB
			chamberNominalTemp	= 1600
			maxEngineTemp = 1850
			thrustCurve
			{
				key = 0 0.2 0.6566457 0.6566457
				key = 0.08 0.7826234 11.38028 11.38028
				key = 0.12 1.091428 0 0
				key = 0.177 1.072238 -0.3012535 -0.3012535
				key = 0.832 0.9977316 0.2489114 0.2489114
				key = 0.91 1.052388 1.565168 1.565168
				key = 0.9730649 1.160696 0 0
				key = 1 0.93 -4.794868 -6.284284
			}
			ignitions = 1
			ullage = false
			pressureFed = false
			massMult = 1
			allowShutdown = False
		}
	}
	MODULE:NEEDS[!B9Partswitch]
	{
		name = ModuleFuelTanks
		basemass = -1
//		volume = 853.448275862
		volume = 0
		@volume += #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = HTPB
		dedicated = true
		TANK
		{
			name = HTPB
			amount = full
			maxAmount = 100.000000%
		}
	}
	MODULE:NEEDS[B9Partswitch]
	{
		name = ModuleB9PartSwitch
		switcherDescription = Engine Config
		switcherDescriptionPlural = Engine Configs
		moduleID = engineSwitch
		baseVolume = 0
		SUBTYPE
		{
			name = SEP7.7
			title =	KEREB-D "Pollux" 7.7
			descriptionSummary = A very basic kick solid motor.
			RESOURCE
			{
				name = HTPB
				unitsPerVolume = 1
			}
			volumeAdded = #$/RESOURCE[SolidFuel]/maxAmount$
		}

		SUBTYPE
		{
			name = SEP9.5
			title =	KEREB-D "Pollux" 9.5
			descriptionSummary = A very basic kick solid motor.
			RESOURCE
			{
				name = HTPB
				unitsPerVolume = 1
			}
			volumeAdded = #$/RESOURCE[SolidFuel]/maxAmount$
			@volumeAdded * 1.259259368
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[_Knes_L3S_Separatron]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = PSPC
			ratio = 100.000000
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = S
		modded = false
		configuration = L3S "Goblin"

		CONFIG
		{
			name = L3S "Goblin"
			description = A small canister filled with what appears to be solid rocket fuel.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = PSPC
				ratio = 100
				DrawGauge = false
			}
			IspSL = 1.0000
			IspV = 1.0000
			ignitions = 1
			ullage = false
			pressureFed = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
		volume = #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = PSPC
		dedicated = true
		TANK
		{
			name = PSPC
			amount = full
			maxAmount = 100.000000%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[_Knes_L3S_H8_Separatron]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = PSPC
			ratio = 100.000000
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = S
		modded = false
		configuration = L3S "Leprechaun"

		CONFIG
		{
			name = L3S "Leprechaun"
			description = A small canister filled with what appears to be solid rocket fuel.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = PSPC
				ratio = 100
				DrawGauge = false
			}
			IspSL = 1.0000
			IspV = 1.0000
			ignitions = 1
			ullage = false
			pressureFed = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
		volume = #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = PSPC
		dedicated = true
		TANK
		{
			name = PSPC
			amount = full
			maxAmount = 100.000000%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[_Knes_L3S_L33_Separatron]:NEEDS[Knes]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		
		!PROPELLANT[SolidFuel] {}

		PROPELLANT
		{
			name = PSPC
			ratio = 100.000000
			DrawGauge = True
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		techLevel = 1
		origTechLevel = 1
		engineType = S
		modded = false
		configuration = L3S "Lilliputian"

		CONFIG
		{
			name = L3S "Lilliputian"
			description = A small canister filled with what appears to be solid rocket fuel.
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			PROPELLANT
			{
				name = PSPC
				ratio = 100
				DrawGauge = false
			}
			IspSL = 1.0000
			IspV = 1.0000
			ignitions = 1
			ullage = false
			pressureFed = false
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
		volume = #$/RESOURCE[SolidFuel]/maxAmount$
		@volume *= 4.213483146
		type = PSPC
		dedicated = true
		TANK
		{
			name = PSPC
			amount = full
			maxAmount = 100.000000%
		}
	}
	!RESOURCE[SolidFuel] {}
}

@PART[_Knes_RCS_3way]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleRCSFX],*
	{
		!resourceName = DELETE
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1.000
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 223
			@key,1 = 1 76
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		type = ModuleRCSFX
		configuration = Hydrazine
		CONFIG
		{
			name = Nitrogen
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.4145454
			
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = Helium
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.261818
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = HTP
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.92727
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1

			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = specializedControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = #$/MODULE[ModuleRCSFX]/thrusterPower$
			@thrusterPower *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
}
@PART[_Knes_MonoProp_Engine_*]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
//		ignitions = -1
		ullage = False
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 231.5
			@key,1 = 1 180
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		techLevel = 1
   		origTechLevel = 1
		engineType = O
		modded = false
		type = ModuleEnginesRF
		configuration = Hydrazine
		CONFIG
		{
			name = HTP
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.92727
			techRequired = basicRocketry
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1
			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				DrawGauge = True
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = flighControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
	}	
	!RESOURCE[MonoPropellant] {}
}

@PART[Knes_Hermes_Engine_Mk91]:FOR[RealFuels_StockEngines]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		%engineID = basicEngine
//		ignitions = -1
		ullage = False
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = 1
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		@atmosphereCurve
		{
			@key,0 = 0 231.5
			@key,1 = 1 180
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		engineID = basicEngine
		techLevel = 1
   		origTechLevel = 1
		engineType = O
		modded = false
		type = ModuleEnginesRF
		configuration = Hydrazine
		CONFIG
		{
			name = HTP
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.92727
			techRequired = basicRocketry
			PROPELLANT
			{
				name = HTP
				ratio = 1.0000
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = NitrousOxide
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 0.96363
			techRequired = generalRocketry
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Hydrazine
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1
			PROPELLANT
			{
				name = Hydrazine
				ratio = 1.0000
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = Cavea-B
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.545454
			techRequired = precisionPropulsion
			PROPELLANT
			{
				ratio = 1.0
				name = CaveaB
				DrawGauge = True
			}
			IspSL = 0.274
			IspV = 0.939
		}
		CONFIG
		{
			name = UDMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.60727
			techRequired = advRocketry
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
			}
			IspSL = 0.361
			IspV = 0.943
		}		
		CONFIG
		{
			name = MMH+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = flighControl
			PROPELLANT
			{
				name = MMH
				ratio = 0.4943
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.5057
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = MMH+MON3
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = propulsionSystems
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
			}
			IspSL = 0.362
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			@maxThrust *= 1.61818
			techRequired = precisionPropulsion
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
			}
			IspSL = 0.366
			IspV = 0.955
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[MonoPropellant]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
	}	
	!RESOURCE[MonoPropellant] {}
}

////////////////////////////////////////////////
// Real Plumes	
////////////////////////////////////////////////

@PART[Knes_Engine_Zebulon]:FOR[RealPlume]:NEEDS[SmokeScreen,!Waterfall] // Ariane 4 cryogenic 3rd stage engine HM7 "Zebulon" Liquid Fuel Engine
{
		@MODULE[ModuleEngines*]
		{
			@name = ModuleEnginesFX
			%powerEffectName = Cryogenic_UpperBlue_CE
		}

		PLUME
		{
		name = Cryogenic_UpperBlue_CE
		transformName = thrustTransform
		localRotation = 0,0,0
		localPosition = 0,0,0

		speed = 1
		energy = 1

		corePosition = 0,0,-0.35
		coreScale = 0.5

		plumePosition = 0,0,-0.2
		plumeScale = 0.3

		plume2Scale = 0.45
		}
}
@PART[Knes_Engine_Zebulon]:FOR[zzRealPlume]:NEEDS[!Waterfall]
{
	@EFFECTS
	{
		@Cryogenic_UpperBlue_CE
		{
		MODEL_MULTI_SHURIKEN_PERSIST
		{
			transformName = thrustTransform
			localRotation = 0,-8,0
			localPosition = -0.25,-0.25,-0.65
			fixedScale = 1.5
			energy = 1
			speed = 1
			emissionMult = 1
			alphaMult = 0.7
			name = turbopump
			modelName = RealPlume/Jade_FX/Engines/BDB/vernierPump
			fixedEmissions = false
			sizeClamp = 50
			randomInitalVelocityOffsetMaxRadius = 0.2
			randConeEmit
			{
			density = 1 0.2
			density = 0 0.5
			}
			linGrow
			{
				density = 1.0 0
				density = 0.5 0.2
				density = 0.2 1.5
				density = 0.0 3
			}
			emission
			{
				power = 1.0 1
				power = 0.01 0.1
				power = 0.0 0.0
			}
			speed
			{
				density = 1.0 1
				density = 0.0 0.8
			}
			energy
			{
				density = 1.0 1
				density = 0.0 0.8
			}
		}
		}
	}
}

@PART[_Knes_L3S_HM4_Engine]:FOR[RealPlume]:NEEDS[SmokeScreen,!Waterfall] //
{
		@MODULE[ModuleEngines*]
		{
			@name = ModuleEnginesFX
			%powerEffectName = Cryogenic_UpperBlue_CE
		}

		PLUME
		{
		name = Cryogenic_UpperBlue_CE
		transformName = thrustTransform
		localRotation = 0,0,0
		localPosition = 0,0,0

		speed = 1
		energy = 1

		corePosition = 0,0,0
		coreScale = 0.2

		plumePosition = 0,0,0.2
		plumeScale = 0.2

		plume2Scale = 0.15
		}
}

@PART[_Knes_L3S_L3S_HM60_Engine]:NEEDS[RealPlume,SmokeScreen,!Waterfall] //Ariane 4 second stage 1.875m engine L33 "Byrding" Liquid Fuel Engine
{
		@MODULE[ModuleEngines*]
		{
		@name = ModuleEnginesFX
		%powerEffectName = Hydrolox_UpperBlue
		}
		PLUME
		{
			name = Hydrolox_UpperBlue
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0

			flarePosition = 0,0,-0.4
				flareScale = 0.4

			fumePosition = 0,0,0.5
				fumeScale = 2.6

				streamPosition = 0,0,0.0
				streamScale = 1.6

				shockconePosition = 0,0,1.3
				shockconeScale = 1
			//global
			energy = 1
			speed = 1

	}
}

@PART[_Knes_L3S_L3S_HM60_Engine]:FOR[zzRealPlume]:NEEDS[!Waterfall]
{
	@EFFECTS
	{
		@Hydrolox_UpperBlue
		{
		MODEL_MULTI_SHURIKEN_PERSIST
		{
			transformName = thrustTransform
			localRotation = 0,8,0
			localPosition = 0.43,0.37,-0.13
			fixedScale = 1.5
			energy = 1
			speed = 1
			emissionMult = 1
			alphaMult = 0.8
			name = turbopump
			modelName = RealPlume/Jade_FX/Engines/BDB/vernierPump
			fixedEmissions = false
			sizeClamp = 50
			randomInitalVelocityOffsetMaxRadius = 0.2
			randConeEmit
			{
			density = 1 0.2
			density = 0 0.5
			}
			linGrow
			{
				density = 1.0 0
				density = 0.5 0.2
				density = 0.2 1.5
				density = 0.0 3
			}
			emission
			{
				power = 1.0 1
				power = 0.01 0.1
				power = 0.0 0.0
			}
			speed
			{
				density = 1.0 1
				density = 0.0 0.8
			}
			energy
			{
				density = 1.0 1
				density = 0.0 0.8
			}

		}

		MODEL_MULTI_SHURIKEN_PERSIST
		{
			transformName = thrustTransform
			localRotation = 0,-8,0
			localPosition = -0.43,-0.37,-0.13
			fixedScale = 1.5
			energy = 1
			speed = 1
			emissionMult = 1
			alphaMult = 0.8
			name = turbopump2
			modelName = RealPlume/Jade_FX/Engines/BDB/vernierPump
			fixedEmissions = false
			sizeClamp = 50
			randomInitalVelocityOffsetMaxRadius = 0.2
			randConeEmit
			{
			density = 1 0.2
			density = 0 0.5
			}
			linGrow
			{
				density = 1.0 0
				density = 0.5 0.2
				density = 0.2 1.5
				density = 0.0 3
			}
			emission
			{
				power = 1.0 1
				power = 0.01 0.1
				power = 0.0 0.0
			}
			speed
			{
				density = 1.0 1
				density = 0.0 0.8
			}
			energy
			{
				density = 1.0 1
				density = 0.0 0.8
			}

		}
		}
	}
}

@PART[_Knes_L3S_L33_Engine]:NEEDS[RealPlume,SmokeScreen,!Waterfall] //Ariane 4 second stage 1.875m engine L33 "Byrding" Liquid Fuel Engine
{
		@MODULE[ModuleEngines*]
		{
		@name = ModuleEnginesFX
		%powerEffectName = Hypergolic_UpperOrange
		}
		PLUME
		{
			name = Hypergolic_UpperOrange
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0
				energy = 1
			speed = 1

			flarePosition = 0,0,-0.3
				flareScale = 0.3

			fumePosition = 0,0,0.6
				fumeScale = 1.2

				streamPosition = 0,0,0.25
				streamScale = 1.2
	}
}

@PART[_Knes_L3S_L140]:NEEDS[RealPlume,SmokeScreen,!Waterfall] // Ariane L-140 "Drakkar" Stage
{
		PLUME
		{
			name = Hypergolic_LowerOrangeShock
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0.2
			fixedScale = 0.8
			energy = 1
			speed = 1
			emissionMult = 0.5

			flarePosition = 0,0,-0.1
			flareScale = 0.15

			plumePosition = 0,0,0.1
			plumeScale = 0.8

			fumePosition = 0,0,0.4
			fumeScale = 1

			blazePosition = 0,0,0
			blazeScale = 0.8
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Hypergolic_LowerOrangeShock
		}
}

@PART[_Knes_L3S_L220]:NEEDS[RealPlume,SmokeScreen,!Waterfall] // Ariane L-220 "Valkyrie" Stage
{
		PLUME
		{
			name = Hypergolic_LowerOrangeShock
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0.2
			fixedScale = 0.8
			energy = 1
			speed = 1
			emissionMult = 0.5

			flarePosition = 0,0,0
			flareScale = 0.2

			plumePosition = 0,0,0.3
			plumeScale = 0.8

			fumePosition = 0,0,0.4
			fumeScale = 1

			blazePosition = 0,0,0
			blazeScale = 0.8
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Hypergolic_LowerOrangeShock
		}
}

@PART[_Knes_L3S_L220N]:NEEDS[RealPlume,SmokeScreen,!Waterfall] // Ariane L-220N "Ragnarok" Stage
{
		PLUME
		{
			name = Hypergolic_LowerOrangeShock
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0.2
			fixedScale = 0.8
			energy = 1
			speed = 1
			emissionMult = 0.5

			flarePosition = 0,0,0
			flareScale = 0.2

			plumePosition = 0,0,0.3
			plumeScale = 0.8

			fumePosition = 0,0,0.4
			fumeScale = 1

			blazePosition = 0,0,0
			blazeScale = 0.8
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Hypergolic_LowerOrangeShock
		}
}

@PART[_Knes_L3S_PAL]:NEEDS[RealPlume,SmokeScreen,!Waterfall] // LRB Ariane "Drako" PAL Booster
{
		PLUME
		{
			name = Hypergolic_LowerOrangeShock
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0.2
			fixedScale = 0.8
			energy = 1
			speed = 1
			emissionMult = 0.5
			saturationMult = 0.8

			flarePosition = 0,0,-0.2
			flareScale = 0.2

			plumePosition = 0,0,0.1
			plumeScale = 0.8

			fumePosition = 0,0,0.2
			fumeScale = 1

			blazePosition = 0,0,0
			blazeScale = 0.8
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Hypergolic_LowerOrangeShock
		}
}

@PART[_Knes_L3S_PAP]:NEEDS[zRealPlume,SmokeScreen]
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesFX
		%powerEffectName = Solid-Lower
	}
		PLUME
		{
			name = Solid-Lower
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,-0.05,-0.3
			fixedScale = 0.45
			energy = 1
			speed = 1
		}
}

@PART[_Knes_L3S_Separatron]:FOR[RealPlume]:NEEDS[SmokeScreen] //
{
		PLUME
		{
			name = Solid-Sepmotor
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0
			fixedScale = 0.4
			energy = 0.3
			speed = 0.7
			emissionMult = 2
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Solid-Sepmotor
		}
}

@PART[_Knes_L3S_H8_Separatron]:FOR[RealPlume]:NEEDS[SmokeScreen] //
{
		PLUME
		{
			name = Solid-Sepmotor
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0
			fixedScale = 0.2
			energy = 0.3
			speed = 0.7
			emissionMult = 2
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Solid-Sepmotor
		}
}

@PART[_Knes_L3S_L33_Separatron]:FOR[RealPlume]:NEEDS[SmokeScreen] //
{
		PLUME
		{
			name = Solid-Sepmotor
			transformName = thrustTransform
			localRotation = 0,0,0
			localPosition = 0,0,0
			fixedScale = 0.2
			energy = 0.3
			speed = 0.7
			emissionMult = 2
		}
		@MODULE[ModuleEngines*]
		{
			%powerEffectName = Solid-Sepmotor
		}
}


@PART[Knes_Hermes_Engine_Mk91]:FOR[RealPlume]:NEEDS[SmokeScreen,!Waterfall] // Hermes Mk-91 "Callisto" Monoprop Engine
{
		@MODULE[ModuleEngines*]
		{
		@name = ModuleEnginesFX
		%powerEffectName = Hypergolic_UpperWhite
		!runningEffectName = DELETE
		}

		PLUME
		{
		name = Hypergolic_UpperWhite
		transformName = thrustTransform
		localRotation = 0,0,0
		localPosition = 0,0,0
		energy = 1
		speed = 1
		emissionMult = 0.5

		flareScale = 0.05

		corePosition = 0,0,0
		coreScale = 0.4

		plumePosition = 0,0,0
		plumeScale = 0.2
		}
}

@PART[_Knes_L3S_P120E]:FOR[RealPlume]:NEEDS[SmokeScreen]
{
    PLUME
    {
        name = Solid-Lower
        transformName = thrustTransform
        localRotation = 0,0,0
        flarePosition = 0,0,0
        plumePosition = 0,0,0
        fixedScale = 1
        energy = 1
        speed = 1
    }
    @MODULE[ModuleEngines*]
    {
        %powerEffectName = Solid-Lower
        !runningEffectName = DELETE
    }
}