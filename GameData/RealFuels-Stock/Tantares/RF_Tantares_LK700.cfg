@PART[aquarius_crew_s1p5_1]:FOR[RealFuels]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = 0
		@volume += #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = #$/RESOURCE[ElectricCharge]/maxAmount$
			maxAmount = #$amount$
			%utilization = 10
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[ElectricCharge]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[ElectricCharge]/maxAmount$
		@temp /= #$TANK[ElectricCharge]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel]{}
	!RESOURCE[Oxidizer]{}
	!MODULE[ModuleGenerator] {}
	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell 1
		StartActionName = Start Fuel Cell 1
		StopActionName = Stop Fuel Cell 1
		ToggleActionName = Toggle Fuel Cell 1
		GeneratesHeat = false
		
		INPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001796963519167
		}
		INPUT_RESOURCE
		{
			ResourceName = Hydrogen
			Ratio = 0.0035510735
		}
		
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.3502557333
			DumpExcess = true
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0000028529600683
			DumpExcess = true
		}		
	}
	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell 2
		StartActionName = Start Fuel Cell 2
		StopActionName = Stop Fuel Cell 2
		ToggleActionName = Toggle Fuel Cell 2
		GeneratesHeat = false
		
		INPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001796963519167
		}
		INPUT_RESOURCE
		{
			ResourceName = Hydrogen
			Ratio = 0.0035510735
		}
		
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.3502557333
			DumpExcess = true
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0000028529600683
			DumpExcess = true
		}		
	}
	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell 3
		StartActionName = Start Fuel Cell 3
		StopActionName = Stop Fuel Cell 3
		ToggleActionName = Toggle Fuel Cell 3
		GeneratesHeat = false
		
		INPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001796963519167
		}
		INPUT_RESOURCE
		{
			ResourceName = Hydrogen
			Ratio = 0.0035510735
		}
		
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.3502557333
			DumpExcess = true
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0000028529600683
			DumpExcess = true
		}		
	}
	MODULE:NEEDS[Kerbalism]
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 1
		valve_i = 1
	}
	MODULE:NEEDS[Kerbalism]
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}
	}
}

@PART[aquarius_service_module_s1p5_1]:FOR[RealFuels_StockEngines]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
	}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}

@PART[aquarius_service_module_s1p5_2]:FOR[RealFuels_StockEngines]
{
	MODULE
	{
		name = ModuleFuelTanks
		volume = #$/RESOURCE[LiquidFuel]/maxAmount$
		@volume += #$/RESOURCE[Oxidizer]/maxAmount$
		@volume *= 5
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = Oxygen
			amount = full
			maxAmount = 2173.60707228
			utilization = 200
			fillable = true
		}
		TANK
		{
			name = Hydrogen
			amount = full
			maxAmount = 4123.563365376
			utilization = 200
			fillable = true
		}
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[Oxygen]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[Oxygen]/maxAmount$
		@temp /= #$TANK[Oxygen]/utilization$
		@volume += #$temp$
	}
	@MODULE[ModuleFuelTanks]:HAS[@TANK[Hydrogen]:HAS[#utilization[>0]]]
	{
		%temp = #$TANK[Hydrogen]/maxAmount$
		@temp /= #$TANK[Hydrogen]/utilization$
		@volume += #$temp$
		!temp = delete
	}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
}